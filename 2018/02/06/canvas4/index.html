<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> canvas基础（四）状态 · lie on this ip ，I am lin</title><meta name="description" content="A Blog Powered By Hexo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/jekyll.css"><!--[if lt IE 9]>
<script src="js/html5shiv.min.js"></script>
<script src="js/respond.min.js"></script>
<![endif]--></head><body><header class="row-flex-row limit-width vh-center"><a href="/" class="logo"><img src="/dog.png"></a><nav><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-link">主页</a></li><li class="nav-list-item"><a href="/archives/" class="nav-link active">   博客</a></li><li class="nav-list-item"><a href="https://github.com/xxxxxx111" target="_blank" class="nav-link">github</a></li><li class="nav-list-item"><a href="https://coding.net/u/xxxxxx" target="_blank" class="nav-link">coding</a></li><li class="nav-list-item"><a href="http://weibo.com/xxxxxx" target="_blank" class="nav-link">weibo</a></li><li class="nav-list-item"><a href="/atom.xml" class="nav-link">rss</a></li></ul></nav></header><div class="container limit-width"><section class="row-flex-row"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/2018/02/06/canvas4/" class="post-title-link">canvas基础（四）状态</a></h2><div class="post-meta"><ul class="post-tag-list"><li class="post-tag-item"><a href="/tags/canvas/" class="post-tag-link">canvas</a></li></ul><div class="post-time">2018年Feb6th Tuesday</div></div><div class="post-content"><h2 id="状态的保存和恢复-Saving-and-restoring-state"><a href="#状态的保存和恢复-Saving-and-restoring-state" class="headerlink" title="状态的保存和恢复 Saving and restoring state"></a>状态的保存和恢复 Saving and restoring state</h2><p>什么是save和restore？</p>
<p>他们是用来保存和恢复canvas状态的。没有参数</p>
<p>canvas状态存储在栈中，save()调用后，当前状态就会贝推入到栈中保存。</p>
<p>状态包括：</p>
<p>当前应用的变形（即移动，旋转和缩放，见下）<br>strokeStyle, fillStyle, globalAlpha, lineWidth, lineCap, lineJoin, miterLimit, shadowOffsetX, shadowOffsetY, shadowBlur, shadowColor, globalCompositeOperation 的值<br>当前的裁切路径（clipping path），会在下一节介绍</p>
<p>可以无限调用save，每一次restore都会将上一个保存的状态弹出来。</p>
<p>例如下边例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>).getContext(<span class="string">'2d'</span>);</span><br><span class="line"></span><br><span class="line">      ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">150</span>, <span class="number">150</span>); <span class="comment">// 使用默认设置绘制一个矩形</span></span><br><span class="line">      ctx.save(); <span class="comment">// 保存默认状态</span></span><br><span class="line"></span><br><span class="line">      ctx.fillStyle = <span class="string">'#09F'</span> <span class="comment">// 在原有配置基础上对颜色做改变</span></span><br><span class="line">      ctx.fillRect(<span class="number">15</span>, <span class="number">15</span>, <span class="number">120</span>, <span class="number">120</span>); <span class="comment">// 使用新的设置绘制一个矩形</span></span><br><span class="line"></span><br><span class="line">      ctx.save(); <span class="comment">// 保存当前状态</span></span><br><span class="line">      ctx.fillStyle = <span class="string">'#FFF'</span> <span class="comment">// 再次改变颜色配置</span></span><br><span class="line">      ctx.globalAlpha = <span class="number">0.5</span>;</span><br><span class="line">      ctx.fillRect(<span class="number">30</span>, <span class="number">30</span>, <span class="number">90</span>, <span class="number">90</span>); <span class="comment">// 使用新的配置绘制一个矩形</span></span><br><span class="line"></span><br><span class="line">      ctx.restore(); <span class="comment">// 重新加载之前的颜色状态</span></span><br><span class="line">      ctx.fillRect(<span class="number">45</span>, <span class="number">45</span>, <span class="number">60</span>, <span class="number">60</span>); <span class="comment">// 使用上一次的配置绘制一个矩形</span></span><br><span class="line">      <span class="comment">//</span></span><br><span class="line">      ctx.restore(); <span class="comment">// 加载默认颜色配置</span></span><br><span class="line">      ctx.fillRect(<span class="number">60</span>, <span class="number">60</span>, <span class="number">30</span>, <span class="number">30</span>); <span class="comment">// 使用加载的配置绘制一个矩形</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="移动-Translating"><a href="#移动-Translating" class="headerlink" title="移动 Translating"></a>移动 Translating</h2><p>translate(x, y)<br>translate 方法接受两个参数。x 是左右偏移量，y 是上下偏移量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>).getContext(<span class="string">'2d'</span>);</span><br><span class="line">      ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">300</span>);</span><br><span class="line">      <span class="comment">//三行三列</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++) &#123;</span><br><span class="line">          ctx.save(); <span class="comment">//保存初始的状态</span></span><br><span class="line">          ctx.strokeStyle = <span class="string">"#9CFF00"</span>;</span><br><span class="line">          ctx.translate(<span class="number">50</span> + j * <span class="number">100</span>, <span class="number">50</span> + i * <span class="number">100</span>); <span class="comment">//偏移，尝试去掉这一行，那么九张图会叠在一块儿，并且只能看见四分之一</span></span><br><span class="line">          drawSpirograph(ctx, <span class="number">20</span> * (j + <span class="number">2</span>) / (j + <span class="number">1</span>), <span class="number">-8</span> * (i + <span class="number">3</span>) / (i + <span class="number">1</span>), <span class="number">10</span>); <span class="comment">//画图</span></span><br><span class="line">          ctx.restore(); <span class="comment">//还原上一个保存状态，也就是初始状态</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">drawSpirograph</span>(<span class="params">ctx, R, r, O</span>) </span>&#123; <span class="comment">//螺旋（spirograph）图案</span></span><br><span class="line">      <span class="keyword">var</span> x1 = R - O;</span><br><span class="line">      <span class="keyword">var</span> y1 = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">var</span> i = <span class="number">1</span>;</span><br><span class="line">      ctx.beginPath();</span><br><span class="line">      ctx.moveTo(x1, y1);</span><br><span class="line">      <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">20000</span>) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">var</span> x2 = (R + r) * <span class="built_in">Math</span>.cos(i * <span class="built_in">Math</span>.PI / <span class="number">72</span>) - (r + O) * <span class="built_in">Math</span>.cos(((R + r) / r) * (i * <span class="built_in">Math</span>.PI / <span class="number">72</span>))</span><br><span class="line">        <span class="keyword">var</span> y2 = (R + r) * <span class="built_in">Math</span>.sin(i * <span class="built_in">Math</span>.PI / <span class="number">72</span>) - (r + O) * <span class="built_in">Math</span>.sin(((R + r) / r) * (i * <span class="built_in">Math</span>.PI / <span class="number">72</span>))</span><br><span class="line">        ctx.lineTo(x2, y2);</span><br><span class="line">        x1 = x2;</span><br><span class="line">        y1 = y2;</span><br><span class="line">        i++;</span><br><span class="line">      &#125; <span class="keyword">while</span> (x2 != R - O &amp;&amp; y2 != <span class="number">0</span>);</span><br><span class="line">      ctx.stroke();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="旋转-Rotating"><a href="#旋转-Rotating" class="headerlink" title="旋转 Rotating"></a>旋转 Rotating</h2><p>rotate(angle)<br>这个方法只接受一个参数：旋转的角度(angle)，它是顺时针方向的，以弧度为单位的值。</p>
<p>下方例子和上边差不多</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>).getContext(<span class="string">'2d'</span>);</span><br><span class="line">      ctx.translate(<span class="number">75</span>, <span class="number">75</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="number">6</span>; i++) &#123; <span class="comment">// Loop through rings (from inside to out)</span></span><br><span class="line">        ctx.save();</span><br><span class="line">        ctx.fillStyle = <span class="string">'rgb('</span> + (<span class="number">51</span> * i) + <span class="string">','</span> + (<span class="number">255</span> - <span class="number">51</span> * i) + <span class="string">',255)'</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; i * <span class="number">6</span>; j++) &#123; <span class="comment">// draw individual dots</span></span><br><span class="line">          ctx.rotate(<span class="built_in">Math</span>.PI * <span class="number">2</span> / (i * <span class="number">6</span>));</span><br><span class="line">          ctx.beginPath();</span><br><span class="line">          ctx.arc(<span class="number">0</span>, i * <span class="number">12.5</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">          ctx.fill();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ctx.restore();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="缩放-Scaling"><a href="#缩放-Scaling" class="headerlink" title="缩放 Scaling"></a>缩放 Scaling</h2><p>scale(x, y)<br>scale 方法接受两个参数。x,y 分别是横轴和纵轴的缩放因子，它们都必须是正值。值比 1.0 小表示缩小，比 1.0 大则表示放大，值为 1.0 时什么效果都没有。</p>
<p><code>默认情况下，canvas 的 1 单位就是 1 个像素。
举例说，如果我们设置缩放因子是 0.5，1 个单位就变成对应 0.5 个像素，这样绘制出来的形状就会是原先的一半。
同理，设置为 2.0 时，1 个单位就对应变成了 2 像素，绘制的结果就是图形放大了 2 倍</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>).getContext(<span class="string">'2d'</span>);</span><br><span class="line">  ctx.strokeStyle = <span class="string">"#fc0"</span>;</span><br><span class="line">  ctx.lineWidth = <span class="number">1.5</span>;</span><br><span class="line">  ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Uniform scaling</span></span><br><span class="line">  ctx.save()</span><br><span class="line">  ctx.translate(<span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">  drawSpirograph(ctx, <span class="number">22</span>, <span class="number">6</span>, <span class="number">5</span>); <span class="comment">// no scaling</span></span><br><span class="line"></span><br><span class="line">  ctx.translate(<span class="number">100</span>, <span class="number">0</span>);</span><br><span class="line">  ctx.scale(<span class="number">0.75</span>, <span class="number">0.75</span>);</span><br><span class="line">  drawSpirograph(ctx, <span class="number">22</span>, <span class="number">6</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">  ctx.translate(<span class="number">133.333</span>, <span class="number">0</span>);</span><br><span class="line">  ctx.scale(<span class="number">0.75</span>, <span class="number">0.75</span>);</span><br><span class="line">  drawSpirograph(ctx, <span class="number">22</span>, <span class="number">6</span>, <span class="number">5</span>);</span><br><span class="line">  ctx.restore();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Non-uniform scaling (y direction)</span></span><br><span class="line">  ctx.strokeStyle = <span class="string">"#0cf"</span>;</span><br><span class="line">  ctx.save()</span><br><span class="line">  ctx.translate(<span class="number">50</span>, <span class="number">150</span>);</span><br><span class="line">  ctx.scale(<span class="number">1</span>, <span class="number">0.75</span>);</span><br><span class="line">  drawSpirograph(ctx, <span class="number">22</span>, <span class="number">6</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">  ctx.translate(<span class="number">100</span>, <span class="number">0</span>);</span><br><span class="line">  ctx.scale(<span class="number">1</span>, <span class="number">0.75</span>);</span><br><span class="line">  drawSpirograph(ctx, <span class="number">22</span>, <span class="number">6</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">  ctx.translate(<span class="number">100</span>, <span class="number">0</span>);</span><br><span class="line">  ctx.scale(<span class="number">1</span>, <span class="number">0.75</span>);</span><br><span class="line">  drawSpirograph(ctx, <span class="number">22</span>, <span class="number">6</span>, <span class="number">5</span>);</span><br><span class="line">  ctx.restore();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Non-uniform scaling (x direction)</span></span><br><span class="line">  ctx.strokeStyle = <span class="string">"#cf0"</span>;</span><br><span class="line">  ctx.save()</span><br><span class="line">  ctx.translate(<span class="number">50</span>, <span class="number">250</span>);</span><br><span class="line">  ctx.scale(<span class="number">0.75</span>, <span class="number">1</span>);</span><br><span class="line">  drawSpirograph(ctx, <span class="number">22</span>, <span class="number">6</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">  ctx.translate(<span class="number">133.333</span>, <span class="number">0</span>);</span><br><span class="line">  ctx.scale(<span class="number">0.75</span>, <span class="number">1</span>);</span><br><span class="line">  drawSpirograph(ctx, <span class="number">22</span>, <span class="number">6</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">  ctx.translate(<span class="number">177.777</span>, <span class="number">0</span>);</span><br><span class="line">  ctx.scale(<span class="number">0.75</span>, <span class="number">1</span>);</span><br><span class="line">  drawSpirograph(ctx, <span class="number">22</span>, <span class="number">6</span>, <span class="number">5</span>);</span><br><span class="line">  ctx.restore();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawSpirograph</span>(<span class="params">ctx, R, r, O</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x1 = R - O;</span><br><span class="line">  <span class="keyword">var</span> y1 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">1</span>;</span><br><span class="line">  ctx.beginPath();</span><br><span class="line">  ctx.moveTo(x1, y1);</span><br><span class="line">  <span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">20000</span>) <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">var</span> x2 = (R + r) * <span class="built_in">Math</span>.cos(i * <span class="built_in">Math</span>.PI / <span class="number">72</span>) - (r + O) * <span class="built_in">Math</span>.cos(((R + r) / r) * (i * <span class="built_in">Math</span>.PI / <span class="number">72</span>))</span><br><span class="line">    <span class="keyword">var</span> y2 = (R + r) * <span class="built_in">Math</span>.sin(i * <span class="built_in">Math</span>.PI / <span class="number">72</span>) - (r + O) * <span class="built_in">Math</span>.sin(((R + r) / r) * (i * <span class="built_in">Math</span>.PI / <span class="number">72</span>))</span><br><span class="line">    ctx.lineTo(x2, y2);</span><br><span class="line">    x1 = x2;</span><br><span class="line">    y1 = y2;</span><br><span class="line">    i++;</span><br><span class="line">  &#125; <span class="keyword">while</span> (x2 != R - O &amp;&amp; y2 != <span class="number">0</span>);</span><br><span class="line">  ctx.stroke();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="变形-Transforms"><a href="#变形-Transforms" class="headerlink" title="变形 Transforms"></a>变形 Transforms</h2><p>transform(m11, m12, m21, m22, dx, dy)</p>
<p>这个方法是将当前的变形矩阵乘上一个基于自身参数的矩阵，在这里我们用下面的矩阵：</p>
<p>m11 m21 dx<br>m12 m22 dy<br>0     0     1</p>
<p>m11：水平方向的缩放</p>
<p>m12：水平方向的偏移</p>
<p>m21：竖直方向的偏移</p>
<p>m22：竖直方向的缩放</p>
<p>dx：水平方向的移动</p>
<p>dy：竖直方向的移动</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>).getContext(<span class="string">'2d'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sin = <span class="built_in">Math</span>.sin(<span class="built_in">Math</span>.PI / <span class="number">6</span>);</span><br><span class="line">    <span class="keyword">var</span> cos = <span class="built_in">Math</span>.cos(<span class="built_in">Math</span>.PI / <span class="number">6</span>);</span><br><span class="line">    ctx.translate(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    <span class="keyword">var</span> c = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;= <span class="number">12</span>; i++) &#123;</span><br><span class="line">      c = <span class="built_in">Math</span>.floor(<span class="number">255</span> / <span class="number">12</span> * i);</span><br><span class="line">      ctx.fillStyle = <span class="string">"rgb("</span> + c + <span class="string">","</span> + c + <span class="string">","</span> + c + <span class="string">")"</span>;</span><br><span class="line">      ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">10</span>);</span><br><span class="line">      ctx.transform(cos, sin, -sin, cos, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ctx.setTransform(<span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    ctx.fillStyle = <span class="string">"rgba(255, 128, 255, 0.5)"</span>;</span><br><span class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">50</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</div></article><div class="pagination"><a href="/2018/02/06/canvas5/" class="pagination-prev">PREV</a><a href="/2018/02/06/canvas3/" class="pagination-next">NEXT</a></div><div class="comments"></div></div><aside class="sidebar"><h3>分类标签</h3><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cordova/">cordova</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/less/">less</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket-io/">socket.io</a></li></ul><h3>最新文章</h3><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/02/06/canvas5/">canvas基础（五）基本动画</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/06/canvas4/">canvas基础（四）状态</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/06/canvas3/">canvas基础（三） 使用图片</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/05/canvas2/">canvas基础（二）绘制图形</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/05/canvas1/">canvas基础（一）基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/02/less/">less</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/02/createVueProjectByCli/">createVueByCli-mobile</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/01/socletio/">socket.io</a></li></ul></aside></section></div><div class="extra"></div><footer class="footer"><div class="row-flex-row limit-width vh-center"><div class="copyright"><P>Powered by lin © 2018 <a href="/">lin</P></div></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-80781234-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?ee75cf111111aa99f8540efa2570970";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>